<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrator Dashboard - Smart Classroom</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .user-badge {
            padding: 8px 16px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .logout-btn {
            padding: 8px 16px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #ff3742;
            transform: translateY(-2px);
        }

        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            min-height: calc(100vh - 180px);
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .nav-item:hover, .nav-item.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateX(5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .content-area {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            opacity: 0.9;
            font-size: 0.9em;
        }

        .timetable-grid {
            display: grid;
            grid-template-columns: 100px repeat(7, 1fr);
            gap: 2px;
            margin-top: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .time-slot, .day-header, .class-cell {
            padding: 12px;
            text-align: center;
            background: white;
            font-size: 0.9em;
        }

        .day-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        .time-slot {
            background: #f8f9fa;
            font-weight: 600;
            color: #666;
        }

        .class-cell {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 8px;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .class-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .classroom-monitor {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .classroom-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .classroom-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .occupied { background-color: #ff4757; }
        .available { background-color: #2ed573; }
        .maintenance { background-color: #ffa502; }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e9ecef;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #2ed573;
            color: white;
        }

        .btn-success:hover {
            background: #26d062;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #ffa502;
            color: white;
        }

        .btn-warning:hover {
            background: #ff9500;
            transform: translateY(-2px);
        }

        .user-management-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .user-management-table th,
        .user-management-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .user-management-table th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        .user-management-table tr:hover {
            background: #f8f9fa;
        }

        .analytics-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
        }

        .ai-insight {
            background: linear-gradient(135deg, #2ed573 0%, #17c0eb 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .sidebar {
                position: static;
            }
            
            .timetable-grid {
                grid-template-columns: 80px repeat(5, 1fr);
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i data-lucide="graduation-cap"></i>
                Smart Classroom Manager
            </div>
            <div class="user-info">
                <div class="user-badge" id="userBadge">Administrator</div>
                <button class="logout-btn" onclick="logout()">
                    <i data-lucide="log-out" style="margin-right: 5px;"></i>
                    Logout
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="nav-item active" onclick="showSection('dashboard')">
                    <i data-lucide="home"></i>
                    Dashboard
                </div>
                <div class="nav-item" onclick="showSection('timetable')">
                    <i data-lucide="calendar"></i>
                    Master Timetable
                </div>
                <div class="nav-item" onclick="showSection('classrooms')">
                    <i data-lucide="monitor"></i>
                    Manage Classrooms
                </div>
                <div class="nav-item" onclick="showSection('users')">
                    <i data-lucide="users"></i>
                    User Management
                </div>
                <div class="nav-item" onclick="showSection('schedule-generator')">
                    <i data-lucide="clock"></i>
                    Schedule Generator
                </div>
                <div class="nav-item" onclick="showSection('ai-insights')">
                    <i data-lucide="brain"></i>
                    AI Insights
                </div>
                <div class="nav-item" onclick="showSection('reports')">
                    <i data-lucide="bar-chart"></i>
                    System Reports
                </div>
                <div class="nav-item" onclick="showSection('settings')">
                    <i data-lucide="settings"></i>
                    System Settings
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area" id="contentArea">
                <!-- Default content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let timetableData = {};
        let classrooms = [];
        let users = [];

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            checkAuth();
            loadSystemData();
            showSection('dashboard');
        });

        function checkAuth() {
            const userData = sessionStorage.getItem('user');
            const token = sessionStorage.getItem('token');
            
            if (!userData || !token) {
                window.location.href = 'login.html';
                return;
            }

            currentUser = JSON.parse(userData);
            
            if (currentUser.role !== 'administrator') {
                alert('Access denied. Administrator role required.');
                window.location.href = 'login.html';
                return;
            }

            document.getElementById('userBadge').textContent = `Administrator - ${currentUser.name || currentUser.email}`;
        }

        async function loadSystemData() {
            try {
                const token = sessionStorage.getItem('token');
                
                // Load system timetable
                const timetableResponse = await fetch('/api/admin/timetable', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (timetableResponse.ok) {
                    timetableData = await timetableResponse.json();
                }

                // Load classrooms
                const classroomsResponse = await fetch('/api/admin/classrooms', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (classroomsResponse.ok) {
                    classrooms = await classroomsResponse.json();
                }

                // Load users
                const usersResponse = await fetch('/api/admin/users', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (usersResponse.ok) {
                    users = await usersResponse.json();
                }
            } catch (error) {
                console.error('Error loading system data:', error);
                loadSampleData();
            }
        }

        function loadSampleData() {
            timetableData = {
                'Monday': {
                    '9:00': { subject: 'Mathematics', room: 'R101', teacher: 'Dr. Smith', students: 28 },
                    '10:00': { subject: 'Physics', room: 'R205', teacher: 'Prof. Johnson', students: 35 },
                    '11:00': { subject: 'Chemistry', room: 'LAB1', teacher: 'Dr. Brown', students: 20 },
                    '2:00': { subject: 'Biology', room: 'LAB2', teacher: 'Ms. Williams', students: 22 },
                    '3:00': { subject: 'English', room: 'R102', teacher: 'Ms. Davis', students: 25 }
                },
                'Tuesday': {
                    '9:00': { subject: 'English', room: 'R102', teacher: 'Ms. Davis', students: 25 },
                    '10:00': { subject: 'Mathematics', room: 'R101', teacher: 'Dr. Smith', students: 28 },
                    '11:00': { subject: 'Physics', room: 'R205', teacher: 'Prof. Johnson', students: 35 },
                    '2:00': { subject: 'History', room: 'R103', teacher: 'Mr. Wilson', students: 30 }
                }
            };

            classrooms = [
                { id: 'R101', name: 'Room 101', status: 'occupied', capacity: 30, currentClass: 'Mathematics', teacher: 'Dr. Smith', students: 28 },
                { id: 'R102', name: 'Room 102', status: 'available', capacity: 25 },
                { id: 'R103', name: 'Room 103', status: 'maintenance', capacity: 35 },
                { id: 'R205', name: 'Room 205', status: 'occupied', capacity: 40, currentClass: 'Physics', teacher: 'Prof. Johnson', students: 35 },
                { id: 'LAB1', name: 'Chemistry Lab', status: 'available', capacity: 20 },
                { id: 'LAB2', name: 'Biology Lab', status: 'occupied', capacity: 24, currentClass: 'Biology', teacher: 'Ms. Williams', students: 22 }
            ];

            users = [
                { id: 1, name: 'Dr. Smith', email: 'smith@school.edu', role: 'teacher', status: 'active', lastLogin: '2024-01-15' },
                { id: 2, name: 'John Student', email: 'john@student.edu', role: 'student', status: 'active', lastLogin: '2024-01-15' },
                { id: 3, name: 'Prof. Johnson', email: 'johnson@school.edu', role: 'teacher', status: 'active', lastLogin: '2024-01-14' },
                { id: 4, name: 'Admin User', email: 'admin@school.edu', role: 'administrator', status: 'active', lastLogin: '2024-01-15' }
            ];
        }

        function showSection(section) {
            // Update active navigation
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            event.target.closest('.nav-item').classList.add('active');

            const contentArea = document.getElementById('contentArea');
            
            switch(section) {
                case 'dashboard':
                    contentArea.innerHTML = `
                        <h2>üìä Administrator Dashboard</h2>
                        <div class="dashboard-stats">
                            <div class="stat-card">
                                <div class="stat-number">50</div>
                                <div class="stat-label">Total Classes</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">30</div>
                                <div class="stat-label">Teachers</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">500</div>
                                <div class="stat-label">Students</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">12</div>
                                <div class="stat-label">Classrooms</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>System Overview</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                                <div style="text-align: center;">
                                    <h4>Classroom Utilization</h4>
                                    <div style="font-size: 24px; color: #667eea; font-weight: bold;">85%</div>
                                </div>
                                <div style="text-align: center;">
                                    <h4>System Uptime</h4>
                                    <div style="font-size: 24px; color: #2ed573; font-weight: bold;">99.9%</div>
                                </div>
                                <div style="text-align: center;">
                                    <h4>Active Sessions</h4>
                                    <div style="font-size: 24px; color: #ffa502; font-weight: bold;">248</div>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="showSection('users')">Manage Users</button>
                            <button class="btn btn-secondary" onclick="showSection('classrooms')">Manage Classrooms</button>
                            <button class="btn btn-success" onclick="showSection('schedule-generator')">Generate Schedule</button>
                        </div>
                    `;
                    break;
                case 'timetable':
                    contentArea.innerHTML = `
                        <h2>üóì Master Timetable</h2>
                        <div style="margin-bottom: 20px;">
                            <button class="btn btn-primary" style="margin-right: 10px;">Export PDF</button>
                            <button class="btn btn-secondary">Print Schedule</button>
                        </div>
                        <div id="adminTimetable"></div>
                    `;
                    renderTimetable('adminTimetable');
                    break;
                case 'classrooms':
                    contentArea.innerHTML = `
                        <h2>üè´ Manage Classrooms</h2>
                        <div style="margin-bottom: 20px;">
                            <button class="btn btn-primary" style="margin-right: 10px;">Add New Classroom</button>
                            <button class="btn btn-secondary">Bulk Import</button>
                        </div>
                        <div class="classroom-monitor">
                            ${classrooms.map(c => `
                                <div class="classroom-card">
                                    <h3>${c.name}</h3>
                                    <p><span class="status-indicator ${c.status}"></span> ${c.status.charAt(0).toUpperCase() + c.status.slice(1)}</p>
                                    <p><strong>Capacity:</strong> ${c.capacity}</p>
                                    ${c.currentClass ? `<p><strong>Current Class:</strong> ${c.currentClass}</p>
                                    <p><strong>Teacher:</strong> ${c.teacher}</p>
                                    <p><strong>Students:</strong> ${c.students}</p>` : ''}
                                    <div style="margin-top: 15px; display: flex; gap: 10px;">
                                        <button class="btn btn-secondary">Edit</button>
                                        <button class="btn btn-warning">Maintenance</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                case 'users':
                    contentArea.innerHTML = `
                        <h2>üë• User Management</h2>
                        <div style="margin-bottom: 20px;">
                            <button class="btn btn-primary" style="margin-right: 10px;">Add New User</button>
                            <button class="btn btn-secondary" style="margin-right: 10px;">Bulk Import</button>
                            <button class="btn btn-warning">Export Users</button>
                        </div>
                        <table class="user-management-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Last Login</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${users.map(user => `
                                    <tr>
                                        <td>${user.name}</td>
                                        <td>${user.email}</td>
                                        <td><span style="text-transform: capitalize; padding: 4px 8px; background: #667eea; color: white; border-radius: 4px; font-size: 12px;">${user.role}</span></td>
                                        <td><span style="color: ${user.status === 'active' ? '#2ed573' : '#ff4757'};">${user.status}</span></td>
                                        <td>${user.lastLogin}</td>
                                        <td>
                                            <button class="btn btn-secondary" style="margin-right: 5px; padding: 5px 10px; font-size: 12px;">Edit</button>
                                            <button class="btn btn-warning" style="padding: 5px 10px; font-size: 12px;">${user.status === 'active' ? 'Deactivate' : 'Activate'}</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                    break;
                case 'schedule-generator':
                    contentArea.innerHTML = `
                        <h2>‚ö° Automatic Schedule Generator</h2>
                        <div class="analytics-card">
                            <h3>AI-Powered Schedule Generation</h3>
                            <p>Generate optimized schedules based on constraints and preferences.</p>
                            <div style="margin-top: 20px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Optimization Priority:</label>
                                        <select style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e9ecef;">
                                            <option>Minimize Conflicts</option>
                                            <option>Maximize Utilization</option>
                                            <option>Teacher Preferences</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Time Frame:</label>
                                        <select style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e9ecef;">
                                            <option>Current Semester</option>
                                            <option>Next Semester</option>
                                            <option>Full Academic Year</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                    <button class="btn btn-primary">Generate New Schedule</button>
                                    <button class="btn btn-secondary">Preview Changes</button>
                                    <button class="btn btn-warning">Reset to Default</button>
                                </div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Schedule Generation History</h3>
                            <div style="margin-top: 15px;">
                                <div style="padding: 15px; border-left: 4px solid #2ed573; margin-bottom: 10px; background: rgba(46, 213, 115, 0.1);">
                                    <strong>Latest Generation:</strong> January 15, 2024<br>
                                    <small>Status: Successful | Conflicts Resolved: 5 | Utilization: 92%</small>
                                </div>
                                <div style="padding: 15px; border-left: 4px solid #667eea; margin-bottom: 10px; background: rgba(102, 126, 234, 0.1);">
                                    <strong>Previous Generation:</strong> January 10, 2024<br>
                                    <small>Status: Successful | Conflicts Resolved: 8 | Utilization: 89%</small>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'ai-insights':
                    contentArea.innerHTML = `
                        <h2>üß† AI Insights & Analytics</h2>
                        <div class="ai-insight">
                            <h3>üîç Smart Recommendations</h3>
                            <p><strong>Classroom Optimization:</strong> Room 205 is underutilized on Wednesdays. Consider scheduling additional physics labs.</p>
                        </div>
                        <div class="ai-insight">
                            <h3>üìà Predictive Analytics</h3>
                            <p><strong>Peak Usage Forecast:</strong> Based on historical data, expect 15% higher classroom demand during exam weeks. Consider temporary space allocation.</p>
                        </div>
                        <div class="ai-insight">
                            <h3>‚ö†Ô∏è Maintenance Alerts</h3>
                            <p><strong>Preventive Maintenance:</strong> Chemistry Lab equipment shows usage patterns suggesting maintenance needed in 2 weeks.</p>
                        </div>
                        <div class="analytics-card">
                            <h3>Performance Metrics</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                                <div style="text-align: center; padding: 20px; border: 2px solid #667eea; border-radius: 10px;">
                                    <h4>Schedule Efficiency</h4>
                                    <div style="font-size: 24px; color: #667eea; font-weight: bold;">94%</div>
                                    <small>Optimal resource allocation</small>
                                </div>
                                <div style="text-align: center; padding: 20px; border: 2px solid #2ed573; border-radius: 10px;">
                                    <h4>Conflict Resolution</h4>
                                    <div style="font-size: 24px; color: #2ed573; font-weight: bold;">98%</div>
                                    <small>Automated conflict detection</small>
                                </div>
                                <div style="text-align: center; padding: 20px; border: 2px solid #ffa502; border-radius: 10px;">
                                    <h4>User Satisfaction</h4>
                                    <div style="font-size: 24px; color: #ffa502; font-weight: bold;">91%</div>
                                    <small>Based on feedback</small>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'reports':
                    contentArea.innerHTML = `
                        <h2>üìë System Reports & Analytics</h2>
                        <div class="analytics-card">
                            <h3>Usage Statistics</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                                <div style="text-align: center;">
                                    <h4>Daily Active Users</h4>
                                    <div style="font-size: 24px; color: #667eea; font-weight: bold;">342</div>
                                </div>
                                <div style="text-align: center;">
                                    <h4>Avg Session Duration</h4>
                                    <div style="font-size: 24px; color: #2ed573; font-weight: bold;">45min</div>
                                </div>
                                <div style="text-align: center;">
                                    <h4>System Load</h4>
                                    <div style="font-size: 24px; color: #ffa502; font-weight: bold;">67%</div>
                                </div>
                                <div style="text-align: center;">
                                    <h4>Error Rate</h4>
                                    <div style="font-size: 24px; color: #ff4757; font-weight: bold;">0.2%</div>
                                </div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Generate Reports</h3>
                            <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
                                <button class="btn btn-primary">Classroom Utilization Report</button>
                                <button class="btn btn-secondary">User Activity Report</button>
                                <button class="btn btn-success">Performance Report</button>
                                <button class="btn btn-warning">Maintenance Report</button>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Recent System Events</h3>
                            <div style="margin-top: 15px;">
                                <div style="padding: 10px; border-left: 4px solid #2ed573; margin-bottom: 10px; background: rgba(46, 213, 115, 0.1);">
                                    <strong>System Update:</strong> Successfully deployed version 2.1.3<br>
                                    <small>January 15, 2024 - 02:00 AM</small>
                                </div>
                                <div style="padding: 10px; border-left: 4px solid #667eea; margin-bottom: 10px; background: rgba(102, 126, 234, 0.1);">
                                    <strong>Backup Completed:</strong> Daily database backup successful<br>
                                    <small>January 15, 2024 - 01:00 AM</small>
                                </div>
                                <div style="padding: 10px; border-left: 4px solid #ffa502; margin-bottom: 10px; background: rgba(255, 165, 2, 0.1);">
                                    <strong>Maintenance Window:</strong> Scheduled maintenance completed<br>
                                    <small>January 14, 2024 - 11:30 PM</small>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'settings':
                    contentArea.innerHTML = `
                        <h2>‚öôÔ∏è System Settings</h2>
                        <div class="analytics-card">
                            <h3>General Settings</h3>
                            <div style="display: grid; gap: 20px; margin-top: 20px;">
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Academic Year:</label>
                                    <select style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e9ecef;">
                                        <option>2024-2025</option>
                                        <option>2025-2026</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Time Slot Duration:</label>
                                    <select style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e9ecef;">
                                        <option>50 minutes</option>
                                        <option>60 minutes</option>
                                        <option>90 minutes</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Default Break Duration:</label>
                                    <select style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e9ecef;">
                                        <option>10 minutes</option>
                                        <option>15 minutes</option>
                                        <option>20 minutes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Security Settings</h3>
                            <div style="margin-top: 15px;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <input type="checkbox" checked style="margin-right: 10px;">
                                    <label>Require two-factor authentication</label>
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <input type="checkbox" checked style="margin-right: 10px;">
                                    <label>Enable session timeout</label>
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <input type="checkbox" style="margin-right: 10px;">
                                    <label>Allow guest access</label>
                                </div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h3>Notification Settings</h3>
                            <div style="margin-top: 15px;">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <input type="checkbox" checked style="margin-right: 10px;">
                                    <label>Email notifications for system alerts</label>
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <input type="checkbox" checked style="margin-right: 10px;">
                                    <label>SMS alerts for critical issues</label>
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <input type="checkbox" style="margin-right: 10px;">
                                    <label>Daily summary reports</label>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" style="margin-right: 10px;">Save Settings</button>
                            <button class="btn btn-secondary">Reset to Default</button>
                        </div>
                    `;
                    break;
            }
            lucide.createIcons();
        }

        function renderTimetable(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            let html = `
                <div class="timetable-grid">
                    <div class="day-header">Time</div>
                    ${Object.keys(timetableData).map(day => `<div class="day-header">${day}</div>`).join('')}
            `;

            const times = ['9:00','10:00','11:00','2:00','3:00'];
            times.forEach(time => {
                html += `<div class="time-slot">${time}</div>`;
                for (let day in timetableData) {
                    let entry = timetableData[day][time];
                    if (entry) {
                        html += `
                            <div class="class-cell" title="${entry.teacher} - ${entry.students} students">
                                <strong>${entry.subject}</strong><br>
                                <small>${entry.room}</small>
                            </div>`;
                    } else {
                        html += `<div class="class-cell">-</div>`;
                    }
                }
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function logout() {
            sessionStorage.removeItem('user');
            sessionStorage.removeItem('token');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>